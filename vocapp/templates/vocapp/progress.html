{% extends "layout_template.html" %}

{% block main %}
<main class="flex_container_col_hcent">
	<div id="chart_container" class="flex_container_row_vcent">
		<canvas id="chart"></canvas>
	</div>

	{% for level, info in levels.items %}
		{{level}} - {{info}} <br>
	{%endfor%}

	<canvas id="myChart" width="400" height="200"></canvas>


</main>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>

<script>
const canvas = document.getElementById('chart');

new Chart(canvas, {
	type: 'pie',
	data: {
		labels: ['Learned', 'Learning', 'Never seen'],
		datasets: [{
			label: 'Epressions',
			
			data: ["{{learned}}", "{{learning}}", "{{not_learned}}"],
			backgroundColor: [
				'rgb(74, 168, 30)',
				'rgb(45, 90, 187)',
				'rgb(124, 107, 107)',
			],
			hoverOffset: 15,
			borderWidth: 1,
			hoverBorderWidth: 2,
		}]
	},
	options: {
		radius: "95%",
		plugins: {
			subtitle: {
				display: true,
				text: 'Total number of expressions: {{total_expressions}}',
				position: 'bottom',
				color: 'rgb(190, 211, 210)',
				font: {
					size: 16,
				},
				padding: 10,
			},
			legend: {
				display: true,
				labels: {
					color: 'rgb(190, 211, 210)',
					font: {
						size: 14,
					},
				}
			}
		},
	}
});
</script>

<script>
const ctx = document.getElementById('myChart').getContext('2d');

const myChart = new Chart(ctx, {
    type: 'bar',
    data: {
        labels: ['A1/A2', 'B1', 'B1+', 'B2', 'C1/C2'],
        datasets: [
			{
                label: 'Never seen',
                data: [2, 20, 30, 10, 20],
                backgroundColor: 'rgba(25, 19, 122, 1)',
            },
			{
                label: 'Learning',
                data: [15, 25, 35, 15, 25],
                backgroundColor: 'rgba(54, 162, 235, 1)',
            },
            {
                label: 'Learned',
                data: [3, 20, 30, 10, 20],
                backgroundColor: 'rgba(255, 99, 132, 1)',
            },
            {
                label: 'Total',
                data: [20, 30, 40, 18, 28],
                backgroundColor: 'rgba(75, 192, 192, 1)',
            }
        ]
    },
    options: {
		responsive: true,
        scales: {
            x: {
                stacked: false // Abilita lo stacking sull'asse x
            },
            y: {
                stacked: false // Abilita lo stacking sull'asse y
            }
        },
		plugins: {
            legend: {
                position: 'top',
            },
            datalabels: {
                color: '#fff', // Colore del testo
                anchor: 'end', // Posizione del testo
                align: 'top', // Allineamento del testo
                formatter: function(value) {
                    return value; // Mostra il valore all'interno delle barre
                },
                font: {
                    weight: 'bold', // Peso del font
                    size: 14 // Dimensione del font
                },
                padding: {
                    bottom: 4 // Padding inferiore
                }
            },
		}
	},
	plugins: [ChartDataLabels]
});

</script>
{% endblock %}